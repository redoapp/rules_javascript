load("@bazel_util//generate:rules.bzl", "format")
load("@rules_javascript//commonjs:rules.bzl", "cjs_root")
load("@rules_javascript//javascript:rules.bzl", "js_library")
load("@rules_javascript//prettier:rules.bzl", "configure_prettier")

format(
    name = "format",
    srcs = ["example.xml"],
    formatter = ":prettier",
)

js_library(
    name = "prettier_config",
    srcs = ["prettierrc.yaml"],
    root = "root",
    deps = ["@npm//@prettier/plugin-xml:lib"],
)

cjs_root(
    name = "root",
    package_name = "@rules-javascript-test/prettier-plugin",
    descriptors = ["package.json"],
)

configure_prettier(
    name = "prettier",
    config = "prettierrc.yaml",
    config_dep = ":prettier_config",
    dep = "@npm//prettier:lib",
)
